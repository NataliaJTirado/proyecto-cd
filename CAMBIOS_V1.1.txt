â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                          ğŸ“ CAMBIOS REALIZADOS                                
                         VERSIÃ“N 1.1.0 - FILTROS                              
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ RESUMEN DE CAMBIOS:

Se actualizÃ³ el scraper.py para manejar datasets que requieren seleccionar filtros
antes de descargar los datos. Ahora 3 datasets tienen lÃ³gica especial:

1. Programas educativos de licenciatura
2. RelaciÃ³n alumnos por profesor  
3. Cuerpos acadÃ©micos

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”§ MODIFICACIONES TÃ‰CNICAS:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NUEVO MÃ‰TODO: select_filter_and_download()                                 â”‚
â”‚                                                                             â”‚
â”‚ FunciÃ³n: Selecciona filtros dropdown y descarga archivos                   â”‚
â”‚ ParÃ¡metros:                                                                 â”‚
â”‚   - filter_value: Texto del filtro (ej: "Unidad acadÃ©mica")                â”‚
â”‚   - suffix: Nombre para el archivo descargado                              â”‚
â”‚                                                                             â”‚
â”‚ Proceso:                                                                    â”‚
â”‚   1. Localiza el dropdown con id="cbNivel"                                  â”‚
â”‚   2. Selecciona el filtro deseado                                          â”‚
â”‚   3. Espera 3 segundos para que se recarguen los datos                     â”‚
â”‚   4. Descarga el archivo Excel                                             â”‚
â”‚   5. Renombra con nombre descriptivo                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MÃ‰TODO MODIFICADO: scrape_dataset()                                        â”‚
â”‚                                                                             â”‚
â”‚ Se agregÃ³ lÃ³gica de casos especiales:                                      â”‚
â”‚                                                                             â”‚
â”‚ IF nombre == "Programas_Licenciatura":                                     â”‚
â”‚    â”œâ”€ Descargar con filtro "Unidad acadÃ©mica"                              â”‚
â”‚    â”‚  â†’ Archivo: Programas_Lic_UnidadAcademica_TIMESTAMP.xlsx              â”‚
â”‚    â””â”€ Descargar con filtro "Ãrea de conocimiento"                          â”‚
â”‚       â†’ Archivo: Programas_Lic_AreaConocimiento_TIMESTAMP.xlsx             â”‚
â”‚                                                                             â”‚
â”‚ ELIF nombre == "Relacion_Alumnos_Profesor":                                â”‚
â”‚    â””â”€ Descargar con filtro "Unidad acadÃ©mica"                              â”‚
â”‚       â†’ Archivo: Relacion_AlumnosProfesor_UnidadAcademica_TIMESTAMP.xlsx   â”‚
â”‚                                                                             â”‚
â”‚ ELIF nombre == "Cuerpos_Academicos":                                       â”‚
â”‚    â”œâ”€ Descargar con filtro "Unidad acadÃ©mica"                              â”‚
â”‚    â”‚  â†’ Archivo: CuerposAcademicos_UnidadAcademica_TIMESTAMP.xlsx          â”‚
â”‚    â””â”€ Descargar con filtro "Ãrea de conocimiento"                          â”‚
â”‚       â†’ Archivo: CuerposAcademicos_AreaConocimiento_TIMESTAMP.xlsx         â”‚
â”‚                                                                             â”‚
â”‚ ELSE:                                                                       â”‚
â”‚    â””â”€ Descargar directamente (sin filtros)                                 â”‚
â”‚       â†’ Proceso normal                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IMPORT AGREGADO:                                                           â”‚
â”‚                                                                             â”‚
â”‚ from selenium.webdriver.support.ui import WebDriverWait, Select            â”‚
â”‚                                                                             â”‚
â”‚ Se agregÃ³ "Select" para manejar elementos <select> de HTML                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š IMPACTO EN DESCARGAS:

ANTES (sin filtros):
â”œâ”€ Programas_Licenciatura â†’ 1 archivo (datos agregados)
â”œâ”€ Relacion_Alumnos_Profesor â†’ 1 archivo (datos agregados)
â””â”€ Cuerpos_Academicos â†’ 1 archivo (datos agregados)

Total: 3 archivos

AHORA (con filtros):
â”œâ”€ Programas_Licenciatura
â”‚  â”œâ”€ Por Unidad acadÃ©mica â†’ 1 archivo
â”‚  â””â”€ Por Ãrea de conocimiento â†’ 1 archivo
â”œâ”€ Relacion_Alumnos_Profesor
â”‚  â””â”€ Por Unidad acadÃ©mica â†’ 1 archivo
â””â”€ Cuerpos_Academicos
   â”œâ”€ Por Unidad acadÃ©mica â†’ 1 archivo
   â””â”€ Por Ãrea de conocimiento â†’ 1 archivo

Total: 5 archivos (con datos desagregados mÃ¡s detallados)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… BENEFICIOS:

1. âœ“ Datos mÃ¡s granulares (por unidad acadÃ©mica y Ã¡rea de conocimiento)
2. âœ“ Mayor detalle para anÃ¡lisis comparativo entre unidades
3. âœ“ Flexibilidad para anÃ¡lisis a diferentes niveles de agregaciÃ³n
4. âœ“ Mantiene compatibilidad con otros datasets sin filtros
5. âœ“ Manejo robusto de errores (si falla un filtro, intenta el siguiente)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ ARCHIVOS QUE SE DESCARGARÃN AHORA:

Prioridad 1 (8 datasets â†’ 10 archivos):
âœ“ Alumnos_Licenciatura_Historico (1 archivo)
âœ“ Alumnos_Posgrado_Historico (1 archivo)
âœ“ Personal_Academico_Historico (1 archivo)
âœ“ Programas_Licenciatura_Historico (1 archivo)
âœ“ Programas_Posgrado_Historico (1 archivo)
âœ“ Relacion_Alumnos_Profesor (1 archivo con filtro) â­ MODIFICADO
âœ“ Personal_SNI_Historico (1 archivo)
âœ“ Cuerpos_Academicos (2 archivos con filtros) â­ MODIFICADO

Prioridad 2 (3 datasets â†’ 4 archivos):
â€¢ Programas_Licenciatura (2 archivos con filtros) â­ MODIFICADO
â€¢ Programas_Posgrado (1 archivo)
â€¢ Personal_Administrativo_Historico (1 archivo)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” EJEMPLO DE USO:

Al ejecutar python scraper.py y seleccionar opciÃ³n 2 (prioritarios):

[1/8] Procesando...
============================================================
Extrayendo: Alumnos_Licenciatura_Historico
URL: https://indicadores.uabc.mx/...
PÃ¡gina cargada correctamente
Tabla 'tblData' encontrada
Haciendo click en botÃ³n de exportar...
âœ“ Descarga exitosa: Alumnos_Licenciatura_Historico_20241122_153045.xlsx

[7/8] Procesando...
============================================================
Extrayendo: Cuerpos_Academicos
URL: https://indicadores.uabc.mx/...
PÃ¡gina cargada correctamente
Tabla 'tblData' encontrada
Dataset con filtros mÃºltiples detectado
  Seleccionando filtro: Unidad acadÃ©mica
  Esperando recarga de datos...
  Descargando archivo...
  âœ“ Descarga exitosa: CuerposAcademicos_UnidadAcademica_20241122_153520.xlsx
    TamaÃ±o: 23.45 KB
  Seleccionando filtro: Ãrea de conocimiento
  Esperando recarga de datos...
  Descargando archivo...
  âœ“ Descarga exitosa: CuerposAcademicos_AreaConocimiento_20241122_153527.xlsx
    TamaÃ±o: 18.32 KB
âœ“ Descarga exitosa: ambos archivos

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš™ï¸ CONFIGURACIÃ“N:

Los tiempos de espera estÃ¡n configurados en config.py:

SELENIUM_CONFIG = {
    "implicit_wait": 10,         # Espera general
    "page_load_timeout": 30,     # Timeout de pÃ¡gina
    "download_timeout": 60,      # Timeout de descarga
    "delay_between_requests": 3, # Delay entre peticiones
}

Delays adicionales en filtros:
- 3 segundos despuÃ©s de cambiar filtro (para recarga de datos)
- 2 segundos antes de descargar (para estabilizar tabla)
- 2 segundos entre filtros mÃºltiples del mismo dataset

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ§ª PRUEBAS RECOMENDADAS:

1. [ ] Ejecutar con modo NO headless primera vez:
       python scraper.py â†’ opciÃ³n 2 â†’ responder "n"
       
2. [ ] Observar que los dropdowns se seleccionan correctamente
       
3. [ ] Verificar que se descargan mÃºltiples archivos para:
       - Programas_Licenciatura (2 archivos)
       - Relacion_Alumnos_Profesor (1 archivo)
       - Cuerpos_Academicos (2 archivos)
       
4. [ ] Ejecutar validador:
       python validator.py
       
5. [ ] Verificar nombres de archivos en downloads/raw/:
       - Deben incluir el sufijo del filtro
       - Deben tener timestamp Ãºnico

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸ POSIBLES PROBLEMAS:

PROBLEMA: El dropdown no se encuentra (id="cbNivel")
SOLUCIÃ“N: El sitio podrÃ­a haber cambiado estructura HTML
         â†’ Revisar cÃ³digo fuente del sitio
         â†’ Actualizar selector en el mÃ©todo

PROBLEMA: Timeout esperando recarga de datos
SOLUCIÃ“N: Aumentar el tiempo de espera de 3 a 5 segundos
         â†’ Editar lÃ­nea: time.sleep(3) â†’ time.sleep(5)

PROBLEMA: Se descarga solo 1 archivo cuando deberÃ­an ser 2
SOLUCIÃ“N: Aumentar delay entre filtros
         â†’ Editar lÃ­nea: time.sleep(2) â†’ time.sleep(4)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ NOTAS ADICIONALES:

â€¢ El mÃ©todo es robusto: si falla un filtro, intenta el siguiente
â€¢ Los archivos se renombran con sufijo descriptivo del filtro aplicado
â€¢ El contador de Ã©xitos/fallos considera ambos archivos del mismo dataset
â€¢ Los logs detallan cada paso del proceso con filtros
â€¢ Compatibilidad total mantenida con datasets sin filtros

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ PARA TU ANÃLISIS:

Con estos cambios, ahora tendrÃ¡s datos mÃ¡s detallados para:

âœ“ Comparar ratios alumnos-profesor ENTRE unidades acadÃ©micas
âœ“ Analizar programas educativos POR unidad y Ã¡rea de conocimiento
âœ“ Estudiar cuerpos acadÃ©micos a nivel mÃ¡s granular
âœ“ Realizar benchmarking entre unidades similares
âœ“ Identificar Ã¡reas con mejor/peor desempeÃ±o

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VersiÃ³n: 1.1.0
Fecha: Noviembre 2024
Tipo de cambio: Mejora funcional (feature)
Retrocompatibilidad: âœ“ SÃ­ (datasets antiguos funcionan igual)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
